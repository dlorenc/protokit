apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonLabels:
  'app.kubernetes.io/name': 'petclinic'
  'app.kubernetes.io/instance': 'petclinic-prod'

commonAnnotations:
  'app.kubernetes.io/version': 'v0.4'

resources:
  - admin-server/admin-server-deployment.yaml
  - admin-server/admin-server-service.yaml
  - api-gateway/api-gateway-deployment.yaml
  - api-gateway/api-gateway-service.yaml
  - config-server/config-server-deployment.yaml
  - config-server/config-server-service.yaml
  - customers-service/customers-service-deployment.yaml
  - customers-service/customers-service-service.yaml
  - discovery-server/discovery-server-deployment.yaml
  - discovery-server/discovery-server-service.yaml
  - grafana/grafana-server-deployment.yaml
  - grafana/grafana-server-service.yaml
  - hystrix/hystrix-dashboard-deployment.yaml
  - hystrix/hystrix-dashboard-service.yaml
  - prometheus/prometheus-server-deployment.yaml
  - prometheus/prometheus-server-service.yaml
  - tracing-server/tracing-server-deployment.yaml
  - tracing-server/tracing-server-service.yaml
  - vets-service/vets-service-deployment.yaml
  - vets-service/vets-service-service.yaml
  - visits-service/visits-service-deployment.yaml
  - visits-service/visits-service-service.yaml

images:
  - name: spring-petclinic-admin-server
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-admin-server
  - name: spring-petclinic-api-gateway
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-api-gateway
  - name: spring-petclinic-config-server
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-config-server
  - name: spring-petclinic-customers-service
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-customers-service
  - name: spring-petclinic-discovery-server
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-discovery-server
  - name: spring-petclinic-hystrix-dashboard
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-hystrix-dashboard
  - name: spring-petclinic-vets-service
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-vets-service
  - name: spring-petclinic-visits-service
    newTag: v0.4
    newName: gcr.io/protokit-238521/spring-petclinic-visits-service
  - name: grafana-server
    newTag: v0.4
    newName: gcr.io/protokit-238521/grafana
  - name: prometheus-server
    newTag: v0.4
    newName: gcr.io/protokit-238521/prometheus

